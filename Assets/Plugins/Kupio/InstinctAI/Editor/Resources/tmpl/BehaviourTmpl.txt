//%GenSrc:1:$GUID$
//%CodeKey:$CODEKEY$
/*
 * This code was generated by InstinctAI$DATETIME$
 *
 *         DO NOT MODIFY BY HAND
 *     THIS FILE WILL BE REGENERATED
 *
 *      DO NOT REMOVE/EDIT COMMENTS
 *
 * If you do need to modify this file, note that it is a partial class.
 * See https://msdn.microsoft.com/en-us/library/wa80x488.aspx
 * You can edit the file $CLASSNAME$.cs
 */

namespace $NAMESPACE$
{
    using System.Collections;
    using UnityEngine;
    using com.kupio.instinctai;
$LIVEUSING$

$REQUIREDCOMPONENTS$
    public partial class $CLASSNAME$$BASECLASS$
#if UNITY_EDITOR
        $LIVEINTERFACE$
#endif
    {
        private IEnumerator _state = null;

        private int _jmp;
        private bool valid = true;

$PUBLISHSTATEENUM$

$COMPPROPERTIES$

$LIVEDECL$

        $UPDATEMETHOD$
        {
            if (valid) {
                if (_state == null || _state.MoveNext() == false) {
                    _state = StateGen();
                    _state.MoveNext();
                }
            }
        }

        private IEnumerator StateGen()
        {
            int node = 0;
            NodeVal ret = NodeVal.Error;
            _jmp = -1;

$LOCALS$

$VALIDATIONS$
            if (!valid) {
                throw new BehaviourTreeException("Behaviour tree will not run. The GameObject has missing required components.");
            }

            do {
                switch (node) {
$CASESTATEMENTS$
                }

            } while (node >= 0);

            yield return null;
        }

        public void ResetTree()
        {
            if (_jmp != 0)
            {
                _jmp = 0;
            }
        }

$LIVEHOOK$

        $FUNCTIONS$
    }

}
